# Requirements Archive: v1.1 Verificações no Portal Web

**Archived:** 2026-01-28
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v1.1 Requirements

### Dados e Infraestrutura

- [x] **DADOS-01**: Server Actions para CRUD de verificações (criar, atualizar resultado, atualizar status)
- [x] **DADOS-02**: Server Actions para CRUD de itens de verificação (marcar C/NC/NA por item)
- [x] **DADOS-03**: RPC PostgreSQL para verificação em massa (bulk insert atômico)
- [x] **DADOS-04**: Queries otimizadas para alimentar a matriz (serviços, unidades, verificações)

### Matriz de Verificações

- [x] **MATRZ-01**: Página de verificações na sidebar da obra com matriz serviço x unidade
- [x] **MATRZ-02**: Células com status visual (cor + ícone) para cada par serviço/unidade
- [x] **MATRZ-03**: Scroll horizontal com coluna de serviço fixa e header fixo
- [x] **MATRZ-04**: Colunas agrupadas por agrupamento com headers multinível
- [x] **MATRZ-05**: Indicador de progresso por serviço (ex: 12/50 verificadas)

### Seleção e Operações em Massa

- [x] **BULK-01**: Seleção de células individuais (Click)
- [x] **BULK-02**: Seleção de range (Shift+Click)
- [x] **BULK-03**: Seleção não-adjacente (Ctrl+Click)
- [x] **BULK-04**: Seleção de linha inteira via header do serviço
- [x] **BULK-05**: Seleção de coluna inteira via header da unidade
- [x] **BULK-06**: Toolbar flutuante contextual com contagem de selecionados e botão "Verificar"
- [x] **BULK-07**: Modal de verificação em massa: resultado (Conforme/NC/Exceção) + descrição
- [x] **BULK-08**: Resolução de conflitos: pular Conformes existentes, NCs viram "após Reinspeção"
- [x] **BULK-09**: Marcação automática de todos os itens conforme resultado do lote

### Verificação Individual

- [x] **VERIF-01**: Página dedicada para verificação de 1 serviço x 1 unidade
- [x] **VERIF-02**: Lista de itens de verificação com toggle C/NC/NA por item
- [x] **VERIF-03**: Resultado automático: qualquer item NC → verificação NC
- [x] **VERIF-04**: Campo de descrição geral por verificação
- [x] **VERIF-05**: Status Exceção para serviço que não se aplica a unidade
- [x] **VERIF-06**: Ciclo de reinspeção: NC → Conforme após Reinspeção | NC após Reinspeção

### Integração e Navegação

- [x] **INTEG-01**: Item "Verificações" na sidebar da obra com link para a matriz
- [x] **INTEG-02**: Dashboard do engenheiro com KPIs alimentados por dados reais de verificações
- [x] **INTEG-03**: Feed de atividades com verificações realizadas (substituir dados mock)
- [x] **INTEG-04**: Navegação da matriz para página individual (clique na célula) e volta

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| DADOS-01 | Phase 7 | Complete |
| DADOS-02 | Phase 7 | Complete |
| DADOS-03 | Phase 7 | Complete |
| DADOS-04 | Phase 7 | Complete |
| MATRZ-01 | Phase 9 | Complete |
| MATRZ-02 | Phase 9 | Complete |
| MATRZ-03 | Phase 9 | Complete |
| MATRZ-04 | Phase 9 | Complete |
| MATRZ-05 | Phase 9 | Complete |
| BULK-01 | Phase 10 | Complete |
| BULK-02 | Phase 10 | Complete |
| BULK-03 | Phase 10 | Complete |
| BULK-04 | Phase 10 | Complete |
| BULK-05 | Phase 10 | Complete |
| BULK-06 | Phase 10 | Complete |
| BULK-07 | Phase 10 | Complete |
| BULK-08 | Phase 10 | Complete |
| BULK-09 | Phase 10 | Complete |
| VERIF-01 | Phase 8 | Complete |
| VERIF-02 | Phase 8 | Complete |
| VERIF-03 | Phase 8 | Complete |
| VERIF-04 | Phase 8 | Complete |
| VERIF-05 | Phase 8 | Complete |
| VERIF-06 | Phase 8 | Complete |
| INTEG-01 | Phase 11 | Complete |
| INTEG-02 | Phase 11 | Complete |
| INTEG-03 | Phase 11 | Complete |
| INTEG-04 | Phase 11 | Complete |

## Out of Scope (v1.1)

| Feature | Reason |
|---------|--------|
| Edição inline na célula da matriz | Anti-feature: célula é indicador de status, não texto editável |
| Modo offline no portal web | Escopo exclusivo do app mobile (Expo) |
| Upload de fotos | Diferido para v1.2 — foco na verificação sem fotos primeiro |
| App Mobile (Expo) | Milestone separado |
| Sync offline | Depende do app mobile |
| Relatórios PDF | Milestone v1.3+ |

## v1.2 Candidates (from this REQUIREMENTS.md)

These requirements were documented as v1.2 candidates during v1.1:

- **FOTO-01**: Upload de fotos por item de verificação
- **FOTO-02**: Compressão client-side antes do upload
- **FOTO-03**: Preview de fotos no item de verificação
- **FOTO-04**: Múltiplas fotos por item
- **MATRZ-06**: Colunas colapsíveis com coluna-resumo
- **MATRZ-07**: Drag-to-select
- **MATRZ-08**: Heatmap de intensidade de status
- **MATRZ-09**: Exportação PDF da matriz
- **UX-01**: Atalhos de teclado na matriz
- **UX-02**: Salvamento automático na verificação individual

---

## Milestone Summary

**Shipped:** 28 of 28 v1.1 requirements
**Adjusted:** None
**Dropped:** None — upload de fotos was explicitly out of scope from planning

---
*Archived: 2026-01-28 as part of v1.1 milestone completion*
