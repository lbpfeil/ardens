---
phase: 04-unidades
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - arden/app/app/obras/[id]/agrupamentos/_components/unidade-form-modal.tsx
  - arden/app/app/obras/[id]/agrupamentos/_components/unidades-panel.tsx
  - arden/app/app/obras/[id]/agrupamentos/_components/agrupamento-form-modal.tsx
  - arden/app/app/obras/[id]/agrupamentos/_components/agrupamentos-panel.tsx
  - arden/app/app/obras/[id]/agrupamentos/_components/delete-confirmation.tsx
  - arden/app/app/obras/[id]/agrupamentos/_components/unidade-delete-confirmation.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "All UI strings use proper PT-BR accents"
    - "Form modals have DialogDescription for accessibility"
    - "No console warnings for missing aria-describedby"
  artifacts:
    - path: "arden/app/app/obras/[id]/agrupamentos/_components/unidade-form-modal.tsx"
      provides: "Unidade form with accents and accessibility"
    - path: "arden/app/app/obras/[id]/agrupamentos/_components/agrupamento-form-modal.tsx"
      provides: "Agrupamento form with accents and accessibility"
  key_links:
    - from: "form modals"
      to: "DialogDescription"
      via: "import and render"
      pattern: "DialogDescription"
---

<objective>
Fix PT-BR accents and add DialogDescription for accessibility.

Purpose: User reported missing accents in Portuguese text and console warnings about missing DialogDescription.
Output: All UI strings properly accented, form modals have sr-only DialogDescription.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/04-unidades/04-UAT.md

# Root causes from UAT
1. Missing PT-BR accents in multiple files
2. Form modals missing DialogDescription component (Radix UI accessibility requirement)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix PT-BR accents in all components</name>
  <files>
    arden/app/app/obras/[id]/agrupamentos/_components/unidade-form-modal.tsx
    arden/app/app/obras/[id]/agrupamentos/_components/unidades-panel.tsx
    arden/app/app/obras/[id]/agrupamentos/_components/agrupamento-form-modal.tsx
    arden/app/app/obras/[id]/agrupamentos/_components/agrupamentos-panel.tsx
    arden/app/app/obras/[id]/agrupamentos/_components/delete-confirmation.tsx
    arden/app/app/obras/[id]/agrupamentos/_components/unidade-delete-confirmation.tsx
  </files>
  <action>
Fix the following accent issues:

**unidade-form-modal.tsx:**
- Line 135: "invalido" -> "inválido"
- Line 187: "multiplas" -> "múltiplas"
- Line 250: "Sera criado:" -> "Será criado:"

**unidades-panel.tsx:**
- Line 64: "a esquerda" -> "à esquerda"
- Line 101: "comecar" -> "começar"
- Line 118: "Acoes" -> "Ações"

**agrupamento-form-modal.tsx:**
- Line 254: "Numero Inicial" -> "Número Inicial"
- Line 273: "Sera criado:" -> "Será criado:"

**agrupamentos-panel.tsx:**
- Line 132: "comecar" -> "começar"

**delete-confirmation.tsx:**
- Line 39: "excluido" -> "excluído"
- Line 56: "acao" -> "ação"

**unidade-delete-confirmation.tsx:**
- Line 38: "excluida" -> "excluída"
- Line 54: "acao" -> "ação"
  </action>
  <verify>
Search each file for missing accents:
- "invalido" should not appear (use "inválido")
- "multiplas" should not appear (use "múltiplas")
- "Sera " should not appear (use "Será ")
- "comecar" should not appear (use "começar")
- "Numero" should not appear (use "Número")
- "excluido" should not appear (use "excluído")
- "excluida" should not appear (use "excluída")
- "acao" should not appear (use "ação")
- "Acoes" should not appear (use "Ações")
  </verify>
  <done>
All PT-BR strings properly accented in UI components.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add DialogDescription to form modals</name>
  <files>
    arden/app/app/obras/[id]/agrupamentos/_components/unidade-form-modal.tsx
    arden/app/app/obras/[id]/agrupamentos/_components/agrupamento-form-modal.tsx
  </files>
  <action>
Add DialogDescription to both form modals for accessibility:

**unidade-form-modal.tsx:**
1. Add DialogDescription to import (line 25):
   ```tsx
   import {
     Dialog,
     DialogContent,
     DialogDescription,
     DialogHeader,
     DialogTitle,
     DialogFooter,
   } from '@/components/ui/dialog'
   ```

2. Add sr-only DialogDescription after DialogTitle (inside DialogHeader):
   ```tsx
   <DialogHeader>
     <DialogTitle>{getTitle()}</DialogTitle>
     <DialogDescription className="sr-only">
       {isEditMode ? 'Formulário para editar unidade' : 'Formulário para criar nova unidade'}
     </DialogDescription>
   </DialogHeader>
   ```

**agrupamento-form-modal.tsx:**
1. Add DialogDescription to import (line 24):
   ```tsx
   import {
     Dialog,
     DialogContent,
     DialogDescription,
     DialogHeader,
     DialogTitle,
     DialogFooter,
   } from '@/components/ui/dialog'
   ```

2. Add sr-only DialogDescription after DialogTitle (inside DialogHeader):
   ```tsx
   <DialogHeader>
     <DialogTitle>{getTitle()}</DialogTitle>
     <DialogDescription className="sr-only">
       {isEditMode ? 'Formulário para editar agrupamento' : 'Formulário para criar novo agrupamento'}
     </DialogDescription>
   </DialogHeader>
   ```

The sr-only class makes the text invisible but available to screen readers, satisfying Radix UI's accessibility requirements without changing the visual layout.
  </action>
  <verify>
1. Both form modals import DialogDescription
2. Both form modals render DialogDescription inside DialogHeader
3. No console warnings when opening modals
  </verify>
  <done>
Form modals have DialogDescription for accessibility compliance.
  </done>
</task>

</tasks>

<verification>
- [ ] All PT-BR accents fixed (grep for unaccented words returns no results)
- [ ] unidade-form-modal.tsx has DialogDescription
- [ ] agrupamento-form-modal.tsx has DialogDescription
- [ ] npm run build passes
</verification>

<success_criteria>
- All UI strings properly accented
- No console warnings for missing aria-describedby
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-unidades/04-04-SUMMARY.md`
</output>
