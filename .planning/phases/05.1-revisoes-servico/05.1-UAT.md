---
status: complete
phase: 05.1-revisoes-servico
source: [05.1-01-SUMMARY.md, 05.1-02-SUMMARY.md, 05.1-03-SUMMARY.md, 05.1-04-SUMMARY.md]
started: 2026-01-22T15:30:00Z
updated: 2026-01-23T12:00:00Z
---

## Current Test

[testing complete]

## Tests

### 1. Revisao na lista de servicos
expected: Na pagina /app/biblioteca, a tabela de servicos mostra uma coluna "Revisao" com badge "Rev. 00" (ou outro numero) para cada servico.
result: pass

### 2. Revisao no detalhe do servico
expected: Ao clicar em um servico, a pagina de detalhe mostra badge de revisao no header e a ultima descricao de mudanca (se houver).
result: pass

### 3. Campo de descricao obrigatorio ao editar
expected: Ao editar um servico (clicando no botao "Editar"), o modal exibe um campo "Descricao da mudanca" que e obrigatorio para salvar.
result: pass

### 4. Incremento automatico de revisao
expected: Apos salvar a edicao com descricao de mudanca preenchida, a revisao do servico incrementa (ex: de Rev. 00 para Rev. 01). O badge na tabela e detalhe refletem o novo numero.
result: issue
reported: "Badge atualiza, mas o badge da revisao atual esta mais apagado que os anteriores. Deveria ser o contrario - dar mais destaque a versao atual."
severity: cosmetic

### 5. Historico de revisoes no detalhe
expected: Na pagina de detalhe do servico, um painel "Historico de Revisoes" mostra a lista de revisoes anteriores com data e descricao de cada mudanca.
result: pass

### 6. Colunas de revisao na pagina de servicos da obra
expected: Na pagina /app/obras/[id]/servicos, a tabela de servicos ativados mostra colunas "Rev. Obra" (revisao que a obra usa) e "Rev. Atual" (revisao na biblioteca).
result: pass

### 7. Indicador de revisao desatualizada
expected: Se um servico da obra tem revisao menor que a biblioteca (ex: obra usa Rev. 00, biblioteca tem Rev. 01), aparece um badge amarelo/warning indicando atualizacao disponivel.
result: pass

### 8. Botao de atualizar revisao
expected: Quando ha atualizacao disponivel, um botao "Atualizar" aparece. Ao clicar, a revisao da obra e atualizada para a mais recente e uma notificacao confirma a acao.
result: pass

## Summary

total: 8
passed: 7
issues: 1
pending: 0
skipped: 0

## Gaps

- truth: "Badge da revisao atual deve ter mais destaque visual que revisoes anteriores"
  status: fixed
  reason: "User reported: Badge atualiza, mas o badge da revisao atual esta mais apagado que os anteriores. Deveria ser o contrario - dar mais destaque a versao atual."
  severity: cosmetic
  test: 4
  fix: "Alterado variant de 'secondary' para 'default' na revisao atual (commit 10aad9c)"
  artifacts:
    - arden/app/app/biblioteca/[id]/_components/revision-history-panel.tsx
