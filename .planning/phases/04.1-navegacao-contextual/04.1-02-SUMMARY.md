---
phase: 04.1-navegacao-contextual
plan: 02
subsystem: routing
tags: [nextjs, routes, redirects, url-structure]

# Dependency graph
requires:
  - phase: 04-unidades
    provides: agrupamentos and unidades management pages
provides:
  - Renamed route /app/obras/[id]/unidades matching user terminology
  - Permanent redirect from old agrupamentos URL
affects: [04.1-03, sidebar-navigation]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - Next.js redirects configuration in next.config.ts

key-files:
  created: []
  modified:
    - arden/app/app/obras/[id]/unidades/page.tsx
    - arden/app/app/obras/[id]/unidades/_components/*
    - arden/next.config.ts

key-decisions:
  - "Route renamed from /agrupamentos to /unidades to match user-facing terminology"
  - "Permanent redirect (301) for SEO and bookmark preservation"

patterns-established:
  - "URL structure follows user mental model, not internal domain model"

# Metrics
duration: 3min
completed: 2026-01-21
---

# Phase 4.1 Plan 02: Rename Agrupamentos Route Summary

**Route renamed from /agrupamentos to /unidades with permanent redirect for old URLs**

## Performance

- **Duration:** 3 min
- **Started:** 2026-01-21T18:00:51Z
- **Completed:** 2026-01-21T18:03:31Z
- **Tasks:** 3
- **Files modified:** 14 (13 renamed, 1 modified)

## Accomplishments
- Renamed route folder from agrupamentos to unidades (13 component files)
- Added permanent redirect in next.config.ts for old URLs
- Build verification passed with new route structure

## Task Commits

Each task was committed atomically:

1. **Task 1: Rename agrupamentos folder to unidades** - `28eb2b4` (refactor)
2. **Task 2: Add redirect for old URL** - `7814980` (feat)
3. **Task 3: Verify app builds and routes work** - No commit (verification only)

## Files Created/Modified
- `arden/app/app/obras/[id]/unidades/page.tsx` - Renamed from agrupamentos
- `arden/app/app/obras/[id]/unidades/_components/*` - 12 component files renamed
- `arden/next.config.ts` - Added redirects configuration

## Decisions Made
- Route renamed to /unidades because that's what users verify - agrupamentos are organizational structure
- Used permanent redirect (301) to preserve SEO and bookmarks

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered
- Git mv failed due to Windows file locking; resolved by copying files to new location and deleting old folder

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness
- Route structure ready for sidebar navigation links
- Redirect ensures old bookmarks continue to work
- Ready for Plan 03: Update Sidebar Navigation

---
*Phase: 04.1-navegacao-contextual*
*Completed: 2026-01-21*
