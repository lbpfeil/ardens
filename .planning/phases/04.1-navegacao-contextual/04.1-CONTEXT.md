# Phase 4.1: Navegação Contextual - Context

**Gathered:** 2026-01-21
**Status:** Ready for planning

<domain>
## Phase Boundary

Implementar sistema de navegação contextual com duas sidebars distintas:
- **Sidebar Global:** Visão geral da construtora (Obras, Biblioteca FVS, etc.)
- **Sidebar de Obra:** Contexto específico de uma obra (Dashboard, Unidades, Serviços, etc.)

Inclui atualização de documentação e adequação das features existentes (obras, agrupamentos, unidades) à nova estrutura de navegação.

</domain>

<decisions>
## Implementation Decisions

### Sidebar Global

- **Itens:** Home > Dashboard > Obras > Biblioteca FVS > Usuários > Configurações
- **MVP + Placeholders:** Features funcionais (Obras, Biblioteca) + placeholders para futuras
- **Indicador de placeholder:** Badge "Em breve" ao lado do texto
- **Comportamento:** Hover expande como overlay (não empurra conteúdo)
- **Sem lista de obras recentes** — apenas link para página `/app/obras`
- **Indicador de status:** Manter bolinha online/offline (importante para obras com conexão instável)

### Sidebar de Obra

- **Itens completos com placeholders** (igual sidebar global)
- **Nome do item:** "Unidades" (não "Agrupamentos" — unidades são o objeto de trabalho)
- **URL:** Renomear `/app/obras/[id]/agrupamentos` para `/app/obras/[id]/unidades`
- **Ordem:** Dashboard > Serviços > Unidades > Verificações > NCs > Relatórios > Equipe > Configurações
- **Seções com separadores visuais:**
  - [Visão Geral: Dashboard]
  - [Operação: Serviços, Unidades, Verificações, NCs]
  - [Admin: Relatórios, Equipe, Configurações]

### Alternância de Contexto

- **Padrão Supabase:** Clicar em obra na listagem → entra no contexto, sidebar muda completamente
- **Voltar para visão global:** Clicar no logo ARDEN ou no breadcrumb (parte da construtora)
- **Breadcrumb:** Construtora > Nome da Obra > Seção atual (ex: Pfeil > Residencial Aurora > Unidades)
- **Transição:** Animação sutil na sidebar ao alternar contexto
- **Página inicial ao entrar:** Dashboard da obra

### Páginas e Rotas

- **Dashboard da obra:** Transformar página de detalhes atual (`/app/obras/[id]`) em dashboard com KPIs placeholder
- **Configurações da obra:** Mover informações cadastrais (nome, código, tipologia) para item "Configurações" na sidebar
- **Unidades:** Renomear rota de `/agrupamentos` para `/unidades`

### Documentação

- **04_NAVIGATION.md:** Atualizar com decisões MVP, marcar o que é placeholder
- **Sincronizar com ROADMAP.md** para features futuras

### Claude's Discretion

- Escolha de ícones do lucide-react para cada item
- Detalhes de animação da transição de contexto
- Layout exato do dashboard placeholder
- Organização interna dos componentes de sidebar

</decisions>

<specifics>
## Specific Ideas

- Referência visual: Sidebar do Supabase (Projects = nossas Obras)
- "Unidades" como nome porque é o que se verifica — agrupamentos são apenas organização geográfica
- Indicador de status (bolinha) importante para engenheiros em obras com conexão instável
- Breadcrumb clicável para navegação rápida entre contextos

</specifics>

<deferred>
## Deferred Ideas

None — discussão ficou dentro do escopo da fase.

</deferred>

---

*Phase: 04.1-navegacao-contextual*
*Context gathered: 2026-01-21*
